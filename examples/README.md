# Moveworks YAML Wizard - Examples

This directory contains example Compound Action YAML files generated by the Moveworks YAML Wizard.

## Generated Examples

### 1. Simple Action (`simple_action.yaml`)
A basic compound action with a single action step that fetches user details.

**Features demonstrated:**
- Single action step
- Input arguments using Bender syntax
- Progress updates for user feedback
- Built-in action usage

### 2. Multi-Step Workflow (`multi_step.yaml`)
A compound action with multiple sequential steps including actions and scripts.

**Features demonstrated:**
- Multiple steps in sequence
- Action step for API calls
- Script step for data processing
- Built-in Moveworks action for notifications
- Data flow between steps

### 3. Script Processing (`script_example.yaml`)
A compound action focused on custom data processing using APIthon scripts.

**Features demonstrated:**
- Multi-line Python/APIthon code
- Statistical calculations
- Complex data structures
- Input argument mapping

## JSON Analysis Examples

### sample_http_response.json
A sample HTTP connector response that demonstrates the JSON analysis feature. This file contains:
- User information with nested objects
- Organization data
- Metadata and API response information
- Various data types (strings, numbers, booleans, arrays, objects)

**Usage:**
```bash
# Analyze the sample JSON file
moveworks-wizard analyze-json --file examples/sample_http_response.json --source user_api

# Use in interactive wizard
moveworks-wizard wizard
# When prompted for input arguments, choose "yes" for JSON analysis
# Then select option 2 to load from file and provide the path: examples/sample_http_response.json
```

**Expected Variable Suggestions:**
- `user_api.data.user.id` - User identifier
- `user_api.data.user.email` - User email address
- `user_api.data.user.department` - User department
- `user_api.data.user.manager.id` - Manager identifier
- `user_api.data.organization.id` - Organization identifier
- And many more...

## Usage in Action Activities

These YAML files are designed to be used within Moveworks Action Activities in the post-April 2025 Plugin architecture. To use them:

1. **Copy the YAML content** into your Action Activity's Compound Action configuration
2. **Configure Input Mappers** in your Action Activity to map Plugin slots to the compound action's `input_args`
3. **Configure Output Mappers** to handle the compound action's results
4. **Test thoroughly** in your Moveworks environment

## Data Flow Example

```
Plugin Slot Values
       ↓
Action Activity Input Mapper
       ↓
Compound Action input_args
       ↓
Compound Action Steps
       ↓
Action Activity Output Mapper
       ↓
Plugin Context Variables
```

## Key Considerations

### Input Arguments
- Use Bender syntax for dynamic values: `data.field_name`, `meta_info.requestor.email`
- Reference data passed from the Action Activity's Input Mapper
- Ensure argument names match what your Action Activity provides

### Output Keys
- Each step's `output_key` becomes available to subsequent steps
- Reference step outputs using `data.output_key_name`
- Plan your data flow carefully for multi-step workflows

### Built-in Actions
- Actions starting with `mw.` are Moveworks built-in actions
- Examples: `mw.send_plaintext_chat_notification`, `mw.create_ticket`
- Refer to Moveworks documentation for available built-in actions

### APIthon Scripts
- Use Python syntax with Moveworks APIthon limitations
- Keep scripts focused and efficient
- Return values that can be serialized to JSON

## Testing Your YAML

Before deploying to production:

1. **Validate YAML syntax** using any YAML validator
2. **Test in Moveworks environment** with sample data
3. **Verify data flow** through Input/Output Mappers
4. **Check error handling** for edge cases
5. **Monitor performance** for complex workflows

## Generating Your Own Examples

Use the example generator script:

```bash
python examples/test_compound_action.py
```

This will create additional example files in the `examples/generated/` directory.

## Next Steps

- Review the [Phase 1 Analysis](../docs/Phase1_Analysis.md) for technical details
- Check the [Project Plan](../Project_plan.txt) for upcoming features
- Use the interactive wizard: `python main.py`
